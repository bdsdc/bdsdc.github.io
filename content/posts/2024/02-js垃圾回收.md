---
title: "运维| javascrit垃圾回收机制"
date: 2024-09-24
lastmod: 2024-09-24
author: 'bdsdc'
linkToMarkdown: true
categories: ['编程']
tags: ['javascript']
---


## 垃圾回收机制
`垃圾回收机制（Garbage Collection)  简称GC` 
js中`内存`的分配和回收都是自动完成的，内存在不使用的时候会被`垃圾回收器`自动回收


### 内存的生命周期
- 内存分配： 当我们声明变量，函数，对象的时候，系统会自动为他们分配内存
- 内存使用： 即读写内存，也就是使用变量，函数等
- 内存回收： 使用完毕，由垃圾回收器自动回收不再使用的内存

### 内存变量说明
- 全局变量一般不会回收（关闭页面回收）
- 一般情况下局部变量的值，不用了。会被自动回收掉
  
### 内存泄露
程序中分配的内存由于某种原因程序未释放或者无法释放叫做内存泄露

## 算法说明
- 栈： 由操作系统自动分配释放函数的参数值，局部变量等，基本数据类型放到栈里
- 堆： 一般由程序员分配释放，若程序员不释放，由垃圾回收机制回收，复杂数据类型放到堆里面

### 引用计数
IE采用的引用计算算法，定义内存不再使用，就是看一个对象是否具有指向它的引用，没有引用了就回收对象

算法： 
- 跟踪记录被引用的次数
- 如果被引用了一次，那么就记录次数1 ，多次引用会累加++
- 如果减少一个引用就减1 --
- 如果引用次数为0，那么则释放内存
致命问题 嵌套引用
如果俩个对象相互引用，尽管他们已不再使用，垃圾回收器不会进行回收，导致内存泄露
因为他们的引用次数永远不会是0 ，这样的相互引用如果说很大量的存在就会导致大量的内存泄露

### 标记清除法
- 现代浏览器已经不再使用引用计数法了
- 现代浏览器通用的大多是基于标记清楚算法的某些改进算法，总体思想都是一致的

核心
- 标记清除算法将 "不在使用的对象" 定义为 "无法达到的对象"
- 就是从根部（在js中就是全局对象）出发定时扫描内存中的对象，凡是能从根部到达的对象，都是还需要使用的
- 那些
- 
